<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adobe Illustrator: Gradient Tool Quiz</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #FF6B35 0%, #FF0080 50%, #9D00FF 100%);
            padding: 30px;
            text-align: center;
            color: white;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        .content {
            padding: 30px;
        }

        .progress-bar {
            background: #e0e0e0;
            height: 8px;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #00FFFF, #FF00FF);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .question-number {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .question-text {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.4;
            color: #2d3748;
        }

        .options {
            display: grid;
            gap: 12px;
        }

        .option {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            padding: 18px 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.05em;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .option:hover:not(.disabled) {
            background: #edf2f7;
            border-color: #cbd5e0;
            transform: translateX(5px);
        }

        .option.selected {
            background: #ebf8ff;
            border-color: #4299e1;
        }

        .option.correct {
            background: #c6f6d5;
            border-color: #48bb78;
            animation: correctPulse 0.5s ease;
        }

        .option.incorrect {
            background: #fed7d7;
            border-color: #f56565;
            animation: shake 0.5s ease;
        }

        .option.disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        .option-letter {
            background: #667eea;
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .option.correct .option-letter {
            background: #48bb78;
        }

        .option.incorrect .option-letter {
            background: #f56565;
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 12px;
            display: none;
            animation: slideIn 0.3s ease;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #c6f6d5;
            border-left: 4px solid #48bb78;
        }

        .feedback.incorrect {
            background: #fed7d7;
            border-left: 4px solid #f56565;
        }

        .feedback-title {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feedback-text {
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .feedback-tip {
            background: rgba(255, 255, 255, 0.5);
            padding: 12px;
            border-radius: 8px;
            font-style: italic;
            margin-top: 10px;
        }

        .feedback-tip strong {
            color: #764ba2;
        }

        .next-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 14px 32px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            margin-top: 20px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            display: none;
        }

        .next-button.show {
            display: inline-block;
        }

        .next-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .next-button:active {
            transform: translateY(0);
        }

        .results {
            text-align: center;
            display: none;
            padding: 20px 0;
        }

        .results.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        .results h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #FF6B35, #FF0080, #9D00FF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .score-display {
            font-size: 4em;
            font-weight: bold;
            background: linear-gradient(135deg, #00FFFF, #FF00FF);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 20px 0;
        }

        .results-message {
            font-size: 1.4em;
            margin: 20px 0;
            color: #2d3748;
        }

        .restart-button {
            background: linear-gradient(135deg, #FF6B35, #FF0080);
            color: white;
            border: none;
            padding: 16px 40px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: 600;
            margin-top: 20px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .restart-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.4);
        }

        .transition-message {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            text-align: center;
            animation: slideIn 0.5s ease;
        }

        .transition-message h3 {
            font-size: 1.4em;
            margin-bottom: 10px;
        }

        .transition-message p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 1.5em;
            }

            .header p {
                font-size: 0.9em;
            }

            .content {
                padding: 20px;
            }

            .question-text {
                font-size: 1.1em;
            }

            .option {
                padding: 14px 16px;
                font-size: 0.95em;
            }

            .score-display {
                font-size: 3em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® Gradient Tool Quiz</h1>
            <p>Adaptive quiz that adjusts to your skill level!</p>
        </div>

        <div class="content">
            <div id="studentInfoForm" style="padding: 30px; text-align: center;">
                <h2 style="color: #2d3748; margin-bottom: 20px;">Before You Begin</h2>
                <p style="color: #4a5568; margin-bottom: 30px;">Please enter your information:</p>
                
                <div style="max-width: 400px; margin: 0 auto; text-align: left;">
                    <label style="display: block; margin-bottom: 5px; color: #2d3748; font-weight: 600;">First Name *</label>
                    <input type="text" id="firstName" placeholder="Enter your first name" style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 1em; margin-bottom: 20px;">
                    
                    <label style="display: block; margin-bottom: 5px; color: #2d3748; font-weight: 600;">Last Name *</label>
                    <input type="text" id="lastName" placeholder="Enter your last name" style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 1em; margin-bottom: 20px;">
                    
                    <label style="display: block; margin-bottom: 5px; color: #2d3748; font-weight: 600;">Email *</label>
                    <input type="email" id="email" placeholder="yourname@sausdlearns.net" style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 1em; margin-bottom: 20px;">
                    
                    <label style="display: block; margin-bottom: 5px; color: #2d3748; font-weight: 600;">Period *</label>
                    <select id="period" style="width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 1em; margin-bottom: 20px; background: white;">
                        <option value="">-- Select Your Period --</option>
                        <option value="1">Period 1</option>
                        <option value="2">Period 2</option>
                        <option value="3">Period 3</option>
                        <option value="4">Period 4</option>
                        <option value="6">Period 6</option>
                        <option value="7">Period 7</option>
                    </select>
                    
                    <p id="formError" style="color: #f56565; margin-bottom: 10px; display: none; font-size: 0.9em;">Please fill in all fields</p>
                    
                    <button onclick="startQuizWithInfo()" style="width: 100%; background: linear-gradient(135deg, #667eea, #764ba2); color: white; border: none; padding: 14px; border-radius: 10px; cursor: pointer; font-size: 1.1em; font-weight: 600; margin-top: 10px;">
                        Start Quiz ‚Üí
                    </button>
                </div>
            </div>

            <div class="progress-bar" id="progressBarContainer" style="display: none;">
                <div class="progress-fill" id="progressBar"></div>
            </div>

            <div id="quizContent" style="display: none;">
                <!-- Questions will be inserted here -->
            </div>

            <div class="results" id="results">
                <!-- Results will be shown here -->
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // GOOGLE SHEETS API CONFIGURATION
        // ============================================
        const SHEETS_API_URL = 'https://script.google.com/macros/s/AKfycbxm26LXQJ8oN1sKmob5cfM1tTUKVazPJnRa0Zvw11MS8_V82SugawP8tvwzUifxBZjS/exec';

        // ============================================
        // STUDENT INFO
        // ============================================
        let studentInfo = {
            firstName: '',
            lastName: '',
            email: '',
            period: ''
        };

        // ============================================
        // QUIZ DATA
        // ============================================
        const starterQuestions = [
            {
                question: "What is a gradient in Adobe Illustrator?",
                options: [
                    "A smooth blend between two or more colors",
                    "A type of brush stroke",
                    "A layer effect that adds shadows",
                    "A tool for drawing straight lines"
                ],
                correct: 0,
                explanation: "According to the lesson, a gradient is defined as 'a smooth blend between two or more colors' - like a sunset fading from orange to pink to purple.",
                tip: "Think of gradients as smooth color transitions you see in nature, like sunsets or the sky!"
            },
            {
                question: "What keyboard shortcut activates the Gradient Tool?",
                options: [
                    "V",
                    "M",
                    "G",
                    "T"
                ],
                correct: 2,
                explanation: "The keyboard shortcut for the Gradient Tool is 'G'. This is listed in the Essential Keyboard Shortcuts section of your lesson.",
                tip: "Remember: G for Gradient! Keep your workflow fast by using keyboard shortcuts."
            },
            {
                question: "What's the main difference between Linear and Radial gradients?",
                options: [
                    "Linear gradients use more colors than radial",
                    "Linear blends in a straight line, Radial blends outward from a center point",
                    "Radial gradients can only be applied to circles",
                    "Linear gradients are faster to render"
                ],
                correct: 1,
                explanation: "Linear gradients blend colors in a straight line (left-right, top-bottom, or any angle), while Radial gradients blend outward from a center point in circles - perfect for glows and spotlights.",
                tip: "Use Linear for backgrounds and geometric effects, Radial for glows, highlights, and spherical objects!"
            }
        ];

        const remediationQuestions = [
            {
                question: "VOCABULARY: What is a Color Stop?",
                options: [
                    "A button that pauses the gradient",
                    "A square-shaped point where you set a specific color",
                    "The final color in a gradient",
                    "A panel for choosing colors"
                ],
                correct: 1,
                explanation: "A Color Stop is a square-shaped point on the gradient where you set a specific color. You can drag it to reposition and double-click to change its color.",
                tip: "Color stops are your control points - the more you add, the more complex your gradient can be!"
            },
            {
                question: "Which menu opens the Gradient Panel?",
                options: [
                    "File > Gradient",
                    "Window > Gradient",
                    "Edit > Gradient",
                    "Object > Gradient"
                ],
                correct: 1,
                explanation: "The Gradient Panel is accessed through Window > Gradient. This is your control center for all gradient settings.",
                tip: "The Gradient Panel lets you fine-tune every aspect of your gradients - keep it open while working!"
            },
            {
                question: "Which types of objects can you apply gradients to?",
                options: [
                    "Only shapes",
                    "Only text",
                    "Shapes, Lines, and Text",
                    "Only vector shapes"
                ],
                correct: 2,
                explanation: "You can apply gradients to all three types of objects in Illustrator: Shapes, Lines, and Text. This gives you maximum creative flexibility!",
                tip: "Gradients aren't just for backgrounds - try them on logos, text headers, and decorative elements!"
            },
            {
                question: "What does the Gradient Tool (G) allow you to do?",
                options: [
                    "Only change gradient colors",
                    "Adjust the direction, length, and position of the gradient",
                    "Create new shapes",
                    "Delete gradients"
                ],
                correct: 1,
                explanation: "The Gradient Tool (G) lets you click and drag to adjust the gradient's direction, length, and starting position on your object.",
                tip: "The longer you drag with the Gradient Tool, the more gradual the color transition will be!"
            },
            {
                question: "What's a Freeform Gradient?",
                options: [
                    "A random gradient generator",
                    "A gradient with no rules",
                    "A gradient where you place color points anywhere on the shape",
                    "A gradient that changes colors automatically"
                ],
                correct: 2,
                explanation: "Freeform Gradients let you place color points anywhere inside a shape for complex, organic color blends - perfect for realistic effects like skin tones or landscapes.",
                tip: "Freeform gradients are newer and more advanced - they're perfect when linear and radial are too simple!"
            },
            {
                question: "How do you add a new color stop to an existing gradient?",
                options: [
                    "Click anywhere on the gradient slider",
                    "Right-click and choose 'Add Stop'",
                    "Press the + button",
                    "Drag a color from the Color Panel"
                ],
                correct: 0,
                explanation: "Simply click anywhere on the gradient slider in the Gradient Panel to add a new color stop. Then double-click it to change its color!",
                tip: "The more color stops you add, the more complex your gradient becomes - but don't overdo it!"
            },
            {
                question: "What happens when you hold SHIFT while using the Gradient Tool?",
                options: [
                    "It creates a radial gradient",
                    "It constrains the gradient to 45-degree angles",
                    "It duplicates the gradient",
                    "It reverses the gradient colors"
                ],
                correct: 1,
                explanation: "Holding SHIFT while dragging with the Gradient Tool constrains the angle to 45-degree increments (0¬∞, 45¬∞, 90¬∞, etc.) for perfectly straight or diagonal gradients.",
                tip: "Use SHIFT for perfectly horizontal, vertical, or diagonal gradients - it keeps things clean and professional!"
            }
        ];

        const standardQuestions = [
            {
                question: "How do you apply a gradient to text while keeping it editable?",
                options: [
                    "Use the Gradient Tool directly on the text",
                    "Open the Appearance Palette and add a new fill",
                    "Convert text to outlines first",
                    "Use the Color Panel"
                ],
                correct: 1,
                explanation: "To apply gradients to text and keep it editable, you must open the Appearance Palette, add a new fill, and apply the gradient there. This preserves the text's editability.",
                tip: "Never convert text to outlines until you're 100% done editing - use the Appearance Palette to stay flexible!"
            },
            {
                question: "What angle setting creates a top-to-bottom gradient effect?",
                options: [
                    "0 degrees",
                    "45 degrees",
                    "-90 degrees",
                    "180 degrees"
                ],
                correct: 2,
                explanation: "An angle of -90 degrees creates a top-to-bottom gradient, like a real sunset. The lesson shows this in the Sunset Sky example: 'Try angle: 0 for horizontal, or -90 for top-to-bottom'.",
                tip: "Angle: 0¬∞ = horizontal (left to right), -90¬∞ = vertical (top to bottom). Experiment with different angles!"
            },
            {
                question: "Where do you switch from a Linear to a Radial gradient?",
                options: [
                    "In the Color Panel",
                    "In the Gradient Panel's Type dropdown",
                    "Using the Gradient Tool while holding Shift",
                    "In the Properties Panel"
                ],
                correct: 1,
                explanation: "To switch to Radial, you use the Gradient Panel and change the Type dropdown from 'Linear' to 'Radial'. This makes your colors blend from the center outward.",
                tip: "The Gradient Panel (Window > Gradient) is your control center for all gradient settings!"
            },
            {
                question: "What's the best way to create a sunset sky effect?",
                options: [
                    "Use a radial gradient with random colors",
                    "Use a linear gradient with warm colors (orange > pink > purple) at -90¬∞ angle",
                    "Use multiple color stops of the same color",
                    "Use a freeform gradient"
                ],
                correct: 1,
                explanation: "The lesson specifically shows a sunset effect using a linear gradient with warm colors (orange to pink to purple) at -90 degrees for that top-to-bottom transition.",
                tip: "Nature's gradients are usually linear (sunsets, skies) or radial (sun, moon, spotlights)!"
            },
            {
                question: "How do you remove a color stop from a gradient?",
                options: [
                    "Click and press Delete",
                    "Right-click and choose Remove",
                    "Drag it down away from the gradient slider",
                    "Select it and press Backspace"
                ],
                correct: 2,
                explanation: "To remove a color stop, simply click and drag it downward away from the gradient slider. It will disappear when you release the mouse.",
                tip: "You can't delete a color stop if it's one of the last two - gradients need at least 2 colors!"
            },
            {
                question: "What does 'Aspect Ratio' control in a Radial gradient?",
                options: [
                    "The brightness of the gradient",
                    "How oval or circular the gradient appears",
                    "The number of colors in the gradient",
                    "The rotation angle"
                ],
                correct: 1,
                explanation: "Aspect Ratio in a Radial gradient controls whether it's a perfect circle (100%) or an oval/ellipse shape. Lower values make it more stretched.",
                tip: "Use circular radial gradients for spheres and glows, oval ones for stretched highlights!"
            },
            {
                question: "When creating a logo with gradient text, what's the recommended workflow?",
                options: [
                    "Convert to outlines immediately",
                    "Use Appearance Palette to keep text editable as long as possible",
                    "Type the text in Photoshop instead",
                    "Use solid colors only"
                ],
                correct: 1,
                explanation: "Best practice is to use the Appearance Palette to apply gradients while keeping text editable. Only convert to outlines when you're absolutely done with all text edits.",
                tip: "Client changed 'Designs' to 'Graphics'? If you already converted to outlines, you have to start over!"
            }
        ];

        const advancedQuestions = [
            {
                question: "ADVANCED: You want to create a neon glow text effect. What's the BEST approach?",
                options: [
                    "Use a single linear gradient from cyan to magenta",
                    "Apply a linear gradient with a white color stop in the middle for intensity",
                    "Use a radial gradient on the text",
                    "Apply multiple overlapping gradients"
                ],
                correct: 1,
                explanation: "The lesson specifically mentions for the Neon Sign Glow: 'Add a third stop in the middle with white for extra glow!' This creates that intense bright center that makes neon pop.",
                tip: "White or bright color stops in the middle create that signature neon intensity - it's all about the highlight!"
            },
            {
                question: "ADVANCED: For a gaming logo with radial glow, where should the white color stop be positioned?",
                options: [
                    "At the outer edge",
                    "In the center",
                    "Evenly spaced throughout",
                    "It doesn't matter"
                ],
                correct: 1,
                explanation: "Looking at the Glowing Orb example in the lesson: 'white center > blue > dark blue edge' - the white is at the center for maximum glow intensity. This mimics how light works in nature.",
                tip: "Radial glows follow real light physics: bright center (white) fading to darker edges. Think sun, light bulbs, health orbs!"
            },
            {
                question: "ADVANCED: What's the advantage of using Appearance Palette for text gradients instead of converting to outlines?",
                options: [
                    "It creates smaller file sizes",
                    "The text remains editable and searchable",
                    "Gradients render faster",
                    "You can use more colors"
                ],
                correct: 1,
                explanation: "Using the Appearance Palette keeps text editable - you can still fix typos, change fonts, or adjust spacing. Once converted to outlines, text becomes permanent shapes.",
                tip: "Editability = flexibility! Only convert to outlines when sending final files to print or when absolutely necessary."
            },
            {
                question: "ADVANCED: You're creating a metallic chrome effect. What gradient technique works best?",
                options: [
                    "Simple two-color gradient from light to dark gray",
                    "Multiple color stops alternating between light and dark grays to create reflective bands",
                    "Radial gradient from white to black",
                    "Random colors to simulate rainbow chrome"
                ],
                correct: 1,
                explanation: "Chrome and metallic effects require multiple sharp transitions between light and dark values to simulate the way metal reflects light in bands. This creates that characteristic metallic look.",
                tip: "Real chrome has sharp highlight bands - don't make it too smooth! Alternate light-dark-light-dark for realism."
            },
            {
                question: "ADVANCED: What's the primary limitation of applying gradients to line strokes?",
                options: [
                    "Gradients can't be applied to strokes at all",
                    "The gradient follows the path direction, which may not be what you want",
                    "Strokes can only have two colors",
                    "They don't print correctly"
                ],
                correct: 1,
                explanation: "When you apply a gradient to a stroke, it flows along the path's direction. For complex paths, this can create unexpected results compared to fill gradients.",
                tip: "For better control over stroke gradients, consider using the Width Tool combined with gradient fills!"
            },
            {
                question: "ADVANCED: You need a gradient that transitions through 5 specific brand colors. What's the most efficient approach?",
                options: [
                    "Create 5 separate shapes with different solid colors",
                    "Add 5 color stops to a single gradient at evenly spaced positions",
                    "Use 5 overlapping gradients with blend modes",
                    "Use Freeform gradient with 5 points"
                ],
                correct: 1,
                explanation: "The most efficient way is to add 5 color stops to a single linear gradient. Position them evenly (0%, 25%, 50%, 75%, 100%) for smooth transitions through all brand colors.",
                tip: "For brand colors, save your custom gradient in the Swatches Panel so you can reuse it across projects!"
            },
            {
                question: "ADVANCED: When would you choose Freeform Gradient over Linear or Radial?",
                options: [
                    "When you need perfect circular glows",
                    "For simple two-color transitions",
                    "When creating organic, complex color blends like landscapes or skin tones",
                    "When working with text"
                ],
                correct: 2,
                explanation: "Freeform Gradients excel at organic, complex effects where Linear and Radial are too rigid - like realistic skin tones, terrain, water, or atmospheric effects.",
                tip: "Freeform is powerful but can be slower to render - use it only when Linear/Radial won't work!"
            }
        ];

        let currentQuestion = 0;
        let score = 0;
        let quizPath = [];
        let answered = false;
        let starterScore = 0;

        function shuffleArray(array) {
            const newArray = [...array];
            for (let i = newArray.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
            }
            return newArray;
        }

        function buildQuizPath() {
            // Shuffle starter questions
            quizPath = shuffleArray(starterQuestions);
            
            if (starterScore < 2) {
                quizPath = quizPath.concat(shuffleArray(remediationQuestions));
            } else if (starterScore === 2) {
                quizPath = quizPath.concat(shuffleArray(standardQuestions));
            } else {
                quizPath = quizPath.concat(shuffleArray(advancedQuestions));
            }
        }

        function startQuizWithInfo() {
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('email').value.trim();
            const period = document.getElementById('period').value;
            const errorEl = document.getElementById('formError');

            // Validate all fields are filled
            if (!firstName || !lastName || !email || !period) {
                errorEl.style.display = 'block';
                return;
            }

            // Store student info
            studentInfo.firstName = firstName;
            studentInfo.lastName = lastName;
            studentInfo.email = email;
            studentInfo.period = period;

            // Hide form, show quiz
            document.getElementById('studentInfoForm').style.display = 'none';
            document.getElementById('progressBarContainer').style.display = 'block';
            document.getElementById('quizContent').style.display = 'block';

            // Start the quiz
            startQuiz();
        }

        function startQuiz() {
            currentQuestion = 0;
            score = 0;
            starterScore = 0;
            answered = false;
            // Shuffle starter questions at the beginning
            quizPath = shuffleArray([...starterQuestions]);
            document.getElementById('results').classList.remove('show');
            showQuestion();
        }

        function showQuestion() {
            answered = false;
            const question = quizPath[currentQuestion];
            const quizContent = document.getElementById('quizContent');
            
            const progress = ((currentQuestion + 1) / quizPath.length) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            // Randomize answer options
            const shuffledOptions = question.options.map((option, index) => ({
                text: option,
                originalIndex: index
            }));
            
            // Shuffle the options array
            for (let i = shuffledOptions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledOptions[i], shuffledOptions[j]] = [shuffledOptions[j], shuffledOptions[i]];
            }

            quizContent.innerHTML = `
                <div class="question-container">
                    <div class="question-header">
                        <div class="question-number">Question ${currentQuestion + 1} of ${quizPath.length}</div>
                    </div>
                    <div class="question-text">${question.question}</div>
                    <div class="options">
                        ${shuffledOptions.map((option, displayIndex) => `
                            <div class="option" onclick="selectAnswer(${option.originalIndex}, ${displayIndex})" data-original="${option.originalIndex}">
                                <div class="option-letter">${String.fromCharCode(65 + displayIndex)}</div>
                                <div>${option.text}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="feedback" id="feedback"></div>
                    <button class="next-button" id="nextButton" onclick="nextQuestion()">
                        ${currentQuestion === quizPath.length - 1 ? 'See Results' : 'Next Question'} ‚Üí
                    </button>
                </div>
            `;
        }

        function selectAnswer(originalIndex, displayIndex) {
            if (answered) return;
            
            answered = true;
            const question = quizPath[currentQuestion];
            const options = document.querySelectorAll('.option');
            const feedback = document.getElementById('feedback');
            const nextButton = document.getElementById('nextButton');
            
            options.forEach((option, index) => {
                const optionOriginalIndex = parseInt(option.getAttribute('data-original'));
                option.classList.add('disabled');
                if (optionOriginalIndex === question.correct) {
                    option.classList.add('correct');
                } else if (index === displayIndex) {
                    option.classList.add('incorrect');
                }
            });

            const isCorrect = originalIndex === question.correct;
            if (isCorrect) {
                score++;
                if (currentQuestion < starterQuestions.length) {
                    starterScore++;
                }
            }

            feedback.className = `feedback ${isCorrect ? 'correct' : 'incorrect'} show`;
            feedback.innerHTML = `
                <div class="feedback-title">
                    ${isCorrect ? '‚úì Correct!' : '‚úó Incorrect'}
                </div>
                <div class="feedback-text">
                    ${question.explanation}
                </div>
                <div class="feedback-tip">
                    <strong>üí° Pro Tip:</strong> ${question.tip}
                </div>
            `;

            nextButton.classList.add('show');
        }

        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion === starterQuestions.length) {
                buildQuizPath();
                showTransitionMessage();
                return;
            }
            
            if (currentQuestion < quizPath.length) {
                showQuestion();
            } else {
                showResults();
            }
        }

        function showTransitionMessage() {
            const quizContent = document.getElementById('quizContent');
            let transitionText, emoji;
            
            if (starterScore < 2) {
                emoji = "üìö";
                transitionText = "Let's review some key concepts to build your foundation!";
            } else if (starterScore === 2) {
                emoji = "üìñ";
                transitionText = "You're doing well! Let's continue with some standard questions.";
            } else {
                emoji = "üî•";
                transitionText = "Great start! Ready for some advanced challenges?";
            }

            quizContent.innerHTML = `
                <div class="transition-message">
                    <h3>${emoji} Quiz Adapting to Your Level ${emoji}</h3>
                    <p>${transitionText}</p>
                    <button class="next-button show" onclick="continueAfterTransition()" style="margin-top: 20px;">
                        Continue ‚Üí
                    </button>
                </div>
            `;
        }

        function continueAfterTransition() {
            showQuestion();
        }

        function showResults() {
            const percentage = Math.round((score / quizPath.length) * 100);
            let message, emoji, pathMessage, pathType;

            if (starterScore < 2) {
                pathMessage = "üìö <strong>Remediation Path:</strong> You got some foundational practice. Review the lesson and try again to unlock harder questions!";
                pathType = "Remediation";
            } else if (starterScore === 2) {
                pathMessage = "üìñ <strong>Standard Path:</strong> You demonstrated solid understanding of the core concepts!";
                pathType = "Standard";
            } else {
                pathMessage = "üî• <strong>Advanced Path:</strong> You aced the basics and tackled the challenging questions!";
                pathType = "Advanced";
            }

            if (percentage === 100) {
                message = "Perfect Score! You're a Gradient Master! üé®‚ú®";
                emoji = "üèÜ";
            } else if (percentage >= 80) {
                message = "Excellent work! You really know your gradients! üåü";
                emoji = "üéØ";
            } else if (percentage >= 60) {
                message = "Good job! Keep practicing those gradient techniques! üí™";
                emoji = "üëç";
            } else {
                message = "Keep learning! Review the lesson and try again! üìö";
                emoji = "üí°";
            }

            document.getElementById('quizContent').style.display = 'none';
            const results = document.getElementById('results');
            results.innerHTML = `
                <h2>${emoji} Quiz Complete! ${emoji}</h2>
                <div class="score-display">${score}/${quizPath.length}</div>
                <div class="results-message">${message}</div>
                <div style="font-size: 1.2em; color: #667eea; margin: 20px 0;">
                    You scored <strong>${percentage}%</strong>
                </div>
                <div style="background: linear-gradient(135deg, #f7fafc, #edf2f7); padding: 20px; border-radius: 12px; margin: 20px 0; border-left: 4px solid #667eea;">
                    ${pathMessage}
                </div>
                <div style="background: white; padding: 20px; border-radius: 12px; margin: 20px 0; border: 2px solid #e2e8f0;">
                    <h3 style="margin-bottom: 10px; color: #2d3748;">üì§ Score Submission</h3>
                    <p style="color: #4a5568; margin-bottom: 10px;">
                        <strong>Student:</strong> ${studentInfo.firstName} ${studentInfo.lastName}<br>
                        <strong>Email:</strong> ${studentInfo.email}<br>
                        <strong>Period:</strong> ${studentInfo.period}<br>
                        <small style="color: #718096;">Your score is being submitted automatically</small>
                    </p>
                    <p id="submitStatus" style="margin-top: 15px; padding: 12px; background: #f7fafc; border-radius: 8px; font-size: 0.95em; color: #667eea;">
                        üì§ Submitting your score automatically...
                    </p>
                </div>
            `;
            results.classList.add('show');

            // Auto-submit after brief delay
            setTimeout(() => {
                submitScore(pathType, score, quizPath.length, percentage);
            }, 500);
        }

        function submitScore(pathType, score, totalQuestions, percentage) {
            const statusEl = document.getElementById('submitStatus');
            
            statusEl.style.color = '#667eea';
            statusEl.textContent = 'üì§ Submitting your score...';

            // Build URL with parameters (GET request)
            const params = new URLSearchParams({
                firstName: studentInfo.firstName,
                lastName: studentInfo.lastName,
                email: studentInfo.email,
                period: studentInfo.period,
                score: `${score}/${totalQuestions}`,
                percentage: `${percentage}%`,
                pathType: pathType,
                quizName: 'Gradient Tool Quiz'
            });

            const url = `${SHEETS_API_URL}?${params.toString()}`;

            fetch(url, {
                method: 'GET'
            })
            .then(response => response.json())
            .then(result => {
                if (result.status === 'success') {
                    statusEl.style.color = '#48bb78';
                    statusEl.innerHTML = '‚úÖ Score submitted successfully!<br><small>Check your Google Sheet to confirm.</small>';
                } else {
                    throw new Error(result.message || 'Unknown error');
                }
            })
            .catch((error) => {
                console.error('Submission error:', error);
                statusEl.style.color = '#f56565';
                statusEl.innerHTML = '‚ùå Error submitting score. Please take a screenshot of your results and send to your teacher.<br><small>Error: ' + error.message + '</small>';
            });
        }

        // Quiz will start after student fills in info form
    </script>
</body>
</html>